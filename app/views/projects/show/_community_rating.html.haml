- if @project.best_analysis && !@project.best_analysis.blank?
  - title = t('.page_title_1')
- else
  - title = t('.page_title_2')

.clear#community_rating
%div
  %h4{ style: 'margin-left:5px;' }= link_to title, summary_project_reviews_path(@project)
  - if @project.ratings.count != 0
    %span{ style: 'margin-left: 8px;' }
      = t((@project.ratings.count == 1 ? '.one_user_rate' : '.users_rate'), n: @project.ratings.count)
    .clear
      %span
        .pull-left{ style: 'margin-left:7px;' }
          != rating_stars('average_rating_stars', @project.rating_average.to_f || 0)
      %span.pull-left{ style: 'padding-left: 10px; padding-top: 3px;' }
        #{number_with_precision(@project.rating_average || 0, precision: 1)}/5.0
  - else
    %span{ style: 'padding-left: 8px; display: block;' }= t('.be_the_first')

  .clear &nbsp;
  %span{ style: 'margin-left: 8px;' }
    - if @rating
      = t('.click_to_edit')
    - else
      = t('.click_to_add')
  .clear
    .jrating.pull-left{ id: @project.to_param, class: (logged_in? ? '' : 'needs_login'), score: score,
      star_style: 'big', style: 'margin-left: 9px', data: { 'show': 'projects/show/community_rating' } }
    %span.hidden.pull-left#rating_spinner
      &nbsp;&nbsp;
      = image_tag('spinner.gif')

    - if @rating
      %span.pull-left#clear{ style: 'padding-left: 10px;' }
        = link_to t('.clear'), 'javascript:void(0);', class: 'btn btn-mini',
                                                      'data-url' => unrate_project_path(@project,
                                                      show: '/projects/show/community_rating'),
                                                      method: :delete
  - unless current_user && Review.by_account(current_user).for_project(@project).count > 0
    .clear &nbsp;
    %span{ style: 'margin-left: 5px;' }
      = link_to t('.review_this_project'), new_project_review_path(@project)
