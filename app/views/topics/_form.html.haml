%fieldset
  .control-group
    %label.control-label.required= t('.title')
    .controls
      = f.text_field :title, class: 'col-md-6'
      %span.help-inline
        by #{ current_user.login }
        %p.help-block= t('.enter_topic_title')
    - if @topic.errors[:title]
      %p.error= @topic.errors[:title]
    %label.control-label.required= t('.message')
    .controls
      = f.fields_for :posts do |f2|
        = f2.text_area :body, rows: 10, cols: 40, style: 'width: 95%'
        - if f2.object.errors[:body]
          %p.error= f2.object.errors[:body]
      %p.help-block= t('.first_post')

  - if current_user_is_admin? && !@topic.new_record?
    .control-group#topic_forum_id
      %label.control-label{ for: 'topic_forum_id' }= t('.forum')
      .controls.chosen#value_select
        = f.select :forum_id, Forum.all.map { |x| [x.name, x.id] }, {}, class: 'chzn-select value-select'

  - if current_user_is_admin?
    .controls
      %label.checkbox.inline{ style: 'margin-left: -20px;' }
        = f.check_box :sticky, choice: t('.sticky')
        %span= t('.sticky')
      %label.checkbox.inline{ style: 'margin-top: 10px;' }
        = f.check_box :closed, choice: t('.closed')
        %span= t('.closed')
  = render partial: 'shared/captcha'
